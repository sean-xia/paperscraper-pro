# ZIP导出功能 - 使用指南

## ✅ 已实现的功能

现在导出功能已升级为：

### 文件结构
```
paper_export_2025-12-01_to_2025-12-03.zip
├── 2025-12-01/
│   ├── 001_第01版_要闻_文章标题1.md
│   ├── 002_第02版_新闻_文章标题2.md
│   └── ...
├── 2025-12-02/
│   ├── 001_第01版_要闻_文章标题.md
│   └── ...
└── 2025-12-03/
    └── ...
```

### 功能特点

✅ **按日期分文件夹**：每个日期单独一个文件夹
✅ **独立文章文件**：每篇文章保存为单独的.md文件
✅ **智能文件命名**：
  - 带序号（001, 002, ...）
  - 文章标题自动清理非法字符
  - 限制长度，避免超长文件名
✅ **ZIP格式下载**：方便保存和分享

## 🔧 更新步骤

### 在Windows PowerShell中执行：

```powershell
# 1. 进入项目目录
cd D:\Dev\jyb\paperscraper-pro

# 2. 停止当前服务器（如果正在运行）
# 按 Ctrl+C

# 3. 安装新依赖（JSZip）
npm install

# 4. 重新启动服务器
npm run dev
```

### 刷新浏览器

在浏览器中按 `Ctrl+Shift+R` 或 `Ctrl+F5` 硬刷新页面。

## 📦 使用方法

1. **爬取文章**：按照之前的方式设置日期并开始爬取
2. **等待完成**：所有文章爬取完成后
3. **导出ZIP**：点击右上角的 **"📥 Export All"** 按钮
4. **下载文件**：浏览器会自动下载名为 `paper_export_开始日期_to_结束日期.zip` 的文件

## 📝 导出过程

导出时会在日志中看到：

```
Creating ZIP archive...
Added 15 articles for 2025-12-01
Added 18 articles for 2025-12-02
Added 16 articles for 2025-12-03
Successfully exported 49 articles in ZIP format
```

## 🎯 文件命名规则

- **日期文件夹**：`YYYY-MM-DD` 格式（如 `2025-12-01`）
- **文章文件**：`序号_标题.md`（如 `001_海口经济圈教育一体化发展按下_加速键_.md`）
- **非法字符处理**：
  - `<>:"/\|?*` 等非法字符替换为 `_`
  - 多个空格或下划线合并
  - 限制文件名长度为100字符

## 💡 提示

- 如果文章标题中有特殊字符（如引号、冒号），会自动替换为下划线
- 每个日期的文章按抓取顺序编号（001, 002, ...）
- ZIP文件可以用任何解压软件打开（WinRAR、7-Zip、Windows自带等）

## ⚠️ 常见问题

### Q: 导出按钮没有反应？
A: 确保已经运行 `npm install` 安装了JSZip依赖并重启了服务器

### Q: 浏览器提示"下载失败"？
A: 检查浏览器的下载设置，确保允许下载文件

### Q: 文件名显示乱码？
A: 确保使用支持UTF-8的解压软件（如7-Zip）

---

**更新时间**：2025-12-04 22:20
**功能版本**：v2.0 - ZIP Export
